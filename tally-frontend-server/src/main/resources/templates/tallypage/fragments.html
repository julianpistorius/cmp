<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:th="http://www.thymeleaf.org"
    xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">

    <div th:fragment="timeline(timeline)">
        <div class="timeline is-centered">
        
            <header class="timeline-header">
                <span class="tag is-medium is-outlined">Today</span>
            </header>
            
            <th:block th:each="month : ${timeline.months}" >
                <div th:replace="this :: timelineMonth(${month})"></div>
            </th:block>
            
        </div>
    </div>

    <th:block th:fragment="timelineMonth(month)">
        <div class="timeline-item">
            <div class="timeline-marker is-danger is-icon">
                <i class="fa fa-flag"></i>
            </div>
            <div class="timeline-content">
                <p class="heading"><strong th:text="${month.name}">February 2019</strong></p>
                <p>Total: <span th:text="${month.totalCount}">10</span></p>
            </div>
        </div>
        <th:block th:each="increment : ${month.increments}">
            <div th:replace="this:: timelineIncrement(${increment})"></div>
        </th:block>
    </th:block>

    <div th:fragment="timelineIncrement(increment)" class="timeline-item">
        <div class="timeline-marker"></div>
        <div class="timeline-content">
            <p class="heading">
                <a th:if="${tally.admin}" th:href="@{/{adminKey}/increment/{incrementId}?action=delete(adminKey=${tally.adminKey}, incrementId=${increment.id})}" class="delete" title="Delete this increment">Delete</a>
                <time is="date-label" th:text="${increment.incrementDateUTC}">2019-09-09</time>
            </p>
            <p th:text="${increment.getDescription()}">
                Pizza
            </p>
            <div class="tags" th:if="${increment.hasTags()}">
                <span class="tag" th:each="tag : ${increment.tags}" th:text="${tag}"></span>
            </div>
        </div>
    </div>
    
</html>